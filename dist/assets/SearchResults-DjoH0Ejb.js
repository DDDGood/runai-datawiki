import{u as D,j as k,o as w,a as s,c as a,b as e,i as N,t as o,l as p,F as _,r as m,g as v,m as h,n as C,h as R,x as j}from"./index-DgcLiLCN.js";const q={class:"mb-6"},B={class:"text-gray-500 mt-1"},I={key:0},S={key:0,class:"bg-white rounded-lg p-8 text-center text-gray-500"},V={key:1,class:"bg-white rounded-lg p-8 text-center text-gray-500"},A={key:2,class:"space-y-6"},F={class:"px-4 py-3 bg-gray-50 border-b font-medium flex items-center gap-2"},L={class:"text-gray-400 text-sm"},T={class:"divide-y"},E=["onClick"],G={class:"flex items-center justify-between"},M={class:"font-mono text-blue-600 text-sm"},O={key:0,class:"ml-2"},$={key:0,class:"text-sm text-gray-500 mt-1 line-clamp-1"},K={__name:"SearchResults",setup(z){const g=C(),x=R(),d=D(),r=v(()=>g.query.q||""),c=h([]),u=h(!0),y=async()=>{if(!r.value){c.value=[],u.value=!1;return}u.value=!0,await d.loadAllData(),c.value=d.searchAllData(r.value),u.value=!1},f=v(()=>{const n={};for(const t of c.value)n[t._type]||(n[t._type]={type:t._type,typeName:t._typeName,items:[]}),n[t._type].items.push(t);return Object.values(n)}),b=n=>{x.push({name:"DataDetail",params:{type:n._type,id:n.ID}})};return k(r,()=>{y()},{immediate:!0}),w(()=>{y()}),(n,t)=>(s(),a("div",null,[e("div",q,[t[0]||(t[0]=e("h1",{class:"text-2xl font-bold"},"搜尋結果",-1)),e("p",B,[N(" 搜尋關鍵字：「"+o(r.value)+"」 ",1),u.value?p("",!0):(s(),a("span",I,"（找到 "+o(c.value.length)+" 筆結果）",1))])]),u.value?(s(),a("div",S," 搜尋中... ")):c.value.length===0?(s(),a("div",V," 沒有找到符合「"+o(r.value)+"」的結果 ",1)):(s(),a("div",A,[(s(!0),a(_,null,m(f.value,i=>(s(),a("div",{key:i.type,class:"bg-white rounded-lg shadow-sm overflow-hidden"},[e("div",F,[e("span",null,o(j(d).getDataTypeConfig(i.type)?.icon),1),e("span",null,o(i.typeName),1),e("span",L,"（"+o(i.items.length)+"）",1)]),e("div",T,[(s(!0),a(_,null,m(i.items,l=>(s(),a("div",{key:l.ID,class:"px-4 py-3 hover:bg-gray-50 cursor-pointer",onClick:H=>b(l)},[e("div",G,[e("div",null,[e("span",M,o(l.ID),1),l.Name?(s(),a("span",O,o(l.Name),1)):p("",!0)]),t[1]||(t[1]=e("span",{class:"text-gray-400 text-sm"},"查看 →",-1))]),l.Description?(s(),a("p",$,o(l.Description),1)):p("",!0)],8,E))),128))])]))),128))]))]))}};export{K as default};
